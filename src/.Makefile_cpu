.DEFAULT:
	qcadesigner-cpu

CC = gcc
	
GLIB = `pkg-config gtk+-2.0 --cflags --libs glib-2.0`

OBJECTS = \
	main_batch_sim.o \
	fileio.o \
	bistable_simulation.o \
	coherence_vector.o \
	design.o \
	exp_array.o \
	fileio_helpers.o \
	generic_utils.o\ 
	simulation.o \
	simulation_data.o \
	vector_table.o \
	objects/object_helpers.o \
	objects/QCADCell.o \
	objects/QCADCompoundDO.o \
	objects/QCADDesignObject.o \
	objects/QCADDOContainer.o \
	objects/QCADLabel.o \
	objects/QCADLayer.o \
	objects/QCADStretchyObject.o \
	objects/QCADSubstrate.o 

ifeq ($(EXTRA_PARAMS1), O1)
      CFLAGS += -O1
endif

ifeq ($(EXTRA_PARAMS1), O2)
      CFLAGS += -O2
endif

ifeq ($(EXTRA_PARAMS1), O3)
      CFLAGS += -O3
endif

CPU_DBG += $(EXTRA_PARAMS2)

qcadesigner-cpu: $(OBJECTS)
	@$(CC) $(GLIB) -o ../bin/$@ $^\
	
%.o: %.c
	@$(CC) $(GLIB) $(CFLAGS) -c -o $@ $<
	
cuda/%.o: cuda/%.c
	@$(CC) $(GLIB) $(CFLAGS) -c -o $@ $<
	
objects/%.o: objects/%.c
	@$(CC) $(GLIB) $(CFLAGS) -c -o $@ $<
	
cuda/%.o: cuda/%.cu
	@$(NVCC) $(NVCFLAGS) -c -o $@ $<

