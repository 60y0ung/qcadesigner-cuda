circuit_ls+="CircuitMUX42_128000.qca "
circuit_ls+="CircuitBig_64000.qca "
circuit_ls+="CircuitMUX83_4096000.qca "
circuit_ls+="CircuitMIG.qca "
circuit_ls+="CircuitVERYBIG_512000.qca "
now=$(date +%s)
echo These files will be used for testing:
echo $circuit_ls
for i in $circuit_ls
do
	echo Simulating $i...
	../bin/qcadesigner-cpu -f ../data/circuits/$i -o ../scripts/coherence_options.txt -n 1 -t 0.001 -e COHERENCE_VECTOR -s ../data/sim_outputs/coherence/$i-$now > ../data/sim_outputs/coherence/$i-$now-cpu.log
	echo Done simulating $i.
	cd ../data
	@rm gnuplot/circuit
	mv -T sim_outputs/coherence/$i-$now-cpu.out gnuplot/circuit
	cd gnuplot
	gnuplot script_plot.gpi
	mv -T circuit.png $i-$now-cpu.png
	rm circuit
	
	for mail in $@
	do
		echo Emailing data to: $mail
		echo Subject: $i-$now-cpu - Simulation done.
		echo Body: $(cat ../sim_outputs/coherence/$i-$now-cpu.log)
		echo Attachment: $i-$now-cpu.png
		cat ../sim_outputs/coherence/$i-$now-cpu.log | mutt -s "$i-$now-cpu - Simulation done." -a $i-$now-cpu.png -- $mail
		#mail -s "$i-$now-cpu - Simulation done." $mail < sim_outputs/coherence/$i-$now-cpu.log
	done
	cd ../../scripts
done
echo All done.
